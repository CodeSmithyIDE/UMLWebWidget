!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CodeSmithyUMLWebWidget=e():t.CodeSmithyUMLWebWidget=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=24)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){switch(t){case"top-center":this.type=s;break;case"top-right":this.type=o;break;case"right-center":this.type=r;break;case"bottom-right":this.type=a;break;case"bottom-center":this.type=l;break;case"bottom-left":this.type=c;break;case"left-center":this.type=h;break;case"top-left":this.type=g}}equals(t){return this.type===t.type}static get TopCenter(){return p}static get TopRight(){return y}static get RightCenter(){return u}static get BottomRight(){return d}static get BottomCenter(){return x}static get BottomLeft(){return m}static get LeftCenter(){return f}static get TopLeft(){return C}}e.ConnectionPointPosition=n;let s=0,o=1,r=2,a=3,l=4,c=5,h=6,g=7,p=new n("top-center"),y=new n("top-right"),u=new n("right-center"),d=new n("bottom-right"),x=new n("bottom-center"),m=new n("bottom-left"),f=new n("left-center"),C=new n("top-left")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(4);var s=Symbol();e.DiagramElement=class{constructor(t,e,i){this.type=e,this.id=i,this.layers=new n.SVGLayerSet(t),this.uptodate=!1,this[s]={x:0,y:0}}getLayers(){return this.update(),this.layers}get x(){return this[s].x}get y(){return this[s].y}move(t,e){this.uptodate=!1,this[s].x=t,this[s].y=e}getConnectionPointsRectangle(){return this.update(),this.doGetConnectionPointsRectangle()}update(){this.uptodate||(this.doUpdate(),this.uptodate=!0)}doUpdate(){}doGetConnectionPointsRectangle(){return null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(0);class o extends n.DiagramElement{constructor(t,e,i,n){super(t,"connectionpoint",null),this.errors=n,this.element=e,this.position=i}setPosition(t){this.position=t;let e=0,i=0,n=this.element.getConnectionPointsRectangle();if(null!=n)switch(this.position){case s.ConnectionPointPosition.TopCenter:e=n.cx,i=n.y;break;case s.ConnectionPointPosition.RightCenter:e=n.x+n.width,i=n.cy;break;case s.ConnectionPointPosition.BottomCenter:e=n.cx,i=n.y+n.height;break;case s.ConnectionPointPosition.LeftCenter:e=n.x,i=n.cy}else this.errors.assertDebug(!1);this.move(e,i)}}e.ConnectionPoint=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGUtils=class{static Group(t){let e=t.group();return e.id(null),e}static Line(t,e,i,n,s){let o=t.line(e,i,n,s);return o.id(null),o}static Rectangle(t,e,i,n,s){let o=t.rect(n,s).move(e,i);return o.id(null),o}static Polygon(t,e){let i=t.polygon(e);return i.id(null),i}static Circle(t,e,i,n){let s=t.circle(n).move(e,i);return s.id(null),s}static Text(t,e,i,n){let s=t.text(n).move(e,i);return s.id(null),s}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5);e.SVGLayerSet=class{constructor(t){this.svg=t,this.layers={}}getLayer(t){return this.layers[t]}createLayer(t){let e=new n.SVGLayer(this.svg);return this.layers[t]=e,e}merge(t){let e=this;Object.keys(e.layers).forEach((function(i){e.layers[i].merge(t.layers[i])}))}clearEachLayer(){let t=this;Object.keys(t.layers).forEach((function(e){t.layers[e].clear()}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGLayer=class{constructor(t){this.svg=t,this.defs=[]}group(t){let e=this.svg.defs().group();return t?e.id(t):e.id(null),this.defs.push(e),e}circle(t){let e=this.svg.defs().circle(t);return e.id(null),this.defs.push(e),e}line(t,e,i,n){let s=this.svg.defs().line(t,e,i,n);return s.id(null),this.defs.push(s),s}polygon(t){let e=this.svg.defs().polygon(t);return e.id(null),this.defs.push(e),e}rect(t,e){let i=this.svg.defs().rect(t,e);return i.id(null),this.defs.push(i),i}text(t){let e=this.svg.defs().text(t);return e.id(null),this.defs.push(e),e}write(t){let e=this;null==t&&(t=e.svg),e.defs.forEach((function(e){t.add(e)}))}merge(t){this.defs=this.defs.concat(t.defs)}clear(){this.defs.forEach((function(t){t.remove()})),this.defs.length=0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Errors=class{constructor(t){this.buildType=t}assertAlways(t){if(!t)throw console.error("Assertion failed"),window.alert("Assertion failed"),new Error}assertDebug(t){0==this.buildType&&this.assertAlways(t)}};class n extends Error{}e.UMLWebWidgetError=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IDGenerator=class{constructor(t){this.prefix=t}createID(t){return this.prefix+"--"+t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Settings=class{constructor(t){this.width=600,this.height=200,this.canMove=!1,this.canResize=!1,this.logLevel="none",this.buildType=1,t&&(t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.interactive&&t.interactive.canMove&&(this.canMove=t.interactive.canMove),null!=t.logLevel&&(this.logLevel=t.logLevel))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Style=class{constructor(){this.style=new Map,this.style.set("defaults",{"margin-left":12,"margin-right":12,"margin-top":9,"margin-bottom":9}),this.style.set("class-template",{"margin-right":15,"margin-top":12}),this.style.set("class-template__parameters-compartment",{"margin-left":8,"margin-right":8,"margin-top":4,"margin-bottom":4}),this.style.set("lifeline",{"execution-specification-bar-width":8,"execution-specification-bar-overhang":5,"execution-specification-bar-margin":15})}getTopMargin(t){return this.getValueOrDefault(this,t,"margin-top")}getBottomMargin(t){return this.getValueOrDefault(this,t,"margin-bottom")}getLeftMargin(t){return this.getValueOrDefault(this,t,"margin-left")}getRightMargin(t){return this.getValueOrDefault(this,t,"margin-right")}getExecutionSpecificationBarWidth(){return this.style.get("lifeline")["execution-specification-bar-width"]}getExecutionSpecificationBarOverhang(){return this.style.get("lifeline")["execution-specification-bar-overhang"]}getExecutionSpecificationBarMargin(){return this.style.get("lifeline")["execution-specification-bar-margin"]}getValueOrDefault(t,e,i){return t.style.get(e)&&t.style.get(e)[i]?t.style.get(e)[i]:t.style.get("defaults")[i]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(8),s=i(9),o=i(11),r=i(12),a=i(14),l=i(15),c=i(16),h=i(18),g=i(19),p=i(20),y=i(21),u=i(22),d=i(23),x=i(7),m=i(6);e.Diagram=class{constructor(t){this.settings=new n.Settings(t),this.errors=new m.Errors(this.settings.buildType),this.log=new d.Log(this.settings.logLevel),this.metrics=new u.Metrics,this.diagramDescription={},this.classboxes=new Map,this.classtemplates=new Map,this.lifelines=new Map,this.components=new Map,this.nodes=new Map,this.actors=new Map,this.usecases=new Map,this.messages=[]}createFromDiv(t,e){let i=JSON.parse($("#"+t).text());$("#"+t).empty();var n=SVG(t).size(this.settings.width,this.settings.height);this.createFromJSON(n,t,i,e)}createFromJSON(t,e,i,n){let o=new x.IDGenerator(e);null==i&&(i={}),this.diagramDescription=i;let r=new s.Style;this.diagramDescription.elements&&this.drawDiagram(t,o,this.diagramDescription.elements,r,n,this.errors)}drawDiagram(t,e,i,n,s,u){let d=new o.LayoutManager(s),x=[],m=[];for(var f=0;f<i.length;f++){let s=i[f];if(s.class)this.classboxes.set(s.class.name,new r.ClassBox(t,e,s.class,this.settings.canMove,n,u));else if(s.classtemplate)this.classtemplates.set(s.classtemplate.name,new a.ClassTemplate(t,e,s.classtemplate,n,u));else if(s.lifeline)this.lifelines.set(s.lifeline.name,new c.Lifeline(t,e,s.lifeline,n,this.log,u));else if(s.component)this.components.set(s.component.name,new l.Component(t,s.component.name,s.component,n,u));else if(s.node)this.nodes.set(s.node.name,new h.Node(t,e,s.node,n,u));else if(s.actor)this.actors.set(s.actor.name,new g.Actor(t,s.actor.name,s.actor,u));else if(s.usecase)this.usecases.set(s.usecase.title,new p.UseCase(t,s.usecase.title,s.usecase,u));else if(s.relationship){let e,i,n=s.relationship.type;"inheritance"==s.relationship.type?(n="inheritance",e=this.classboxes.get(s.relationship.derivedclass),null==e&&(e=this.classtemplates.get(s.relationship.derivedclass)),i=this.classboxes.get(s.relationship.baseclass),null==i&&(i=this.classtemplates.get(s.relationship.baseclass))):"composition"!=s.relationship.type&&"aggregation"!=s.relationship.type||(n=s.relationship.type,e=this.classboxes.get(s.relationship.containedclass),i=this.classboxes.get(s.relationship.containingclass));let o=e.createConnectionPoint(t),r=i.createConnectionPoint(t),a=new y.Connector(t,n,o,r,null);x.push(a)}else if(s.messages)for(let e=0;e<s.messages.length;e++){let i,n=s.messages[e];if(n.synchronousmessage){let e=this.lifelines.get(n.synchronousmessage.caller),s=this.lifelines.get(n.synchronousmessage.callee),o=e.createConnectionPoint(t,"synchronous-start"),r=s.createConnectionPoint(t,"synchronous-end");i=new y.Connector(t,"synchronousmessage",o,r,n.synchronousmessage.name)}else if(n.returnmessage){let e=this.lifelines.get(n.returnmessage.callee),s=this.lifelines.get(n.returnmessage.caller),o=e.createConnectionPoint(t,"return-start"),r=s.createConnectionPoint(t,"return-end");i=new y.Connector(t,"returnmessage",o,r,null)}else if(n.creationmessage){let e=this.lifelines.get(n.creationmessage.caller),s=this.lifelines.get(n.creationmessage.callee),o=e.createConnectionPoint(t,"creation-start"),r=s.createConnectionPoint(t,"creation-end");i=new y.Connector(t,"creationmessage",o,r,null)}else if(n.destructionmessage){let e=this.lifelines.get(n.destructionmessage.callee).createConnectionPoint(t,"destruction-end");i=new y.Connector(t,"destructionmessage",e,e,"")}this.messages.push(i)}else if(s.assemblyconnector){let e=this.components.get(s.assemblyconnector.consumer),i=this.components.get(s.assemblyconnector.provider),n=e.createDependencyConnectionPoint(t,s.assemblyconnector.interface),o=i.createInterfaceConnectionPoint(t,s.assemblyconnector.interface),r=new y.Connector(t,"assemblyconnector",n,o,null);m.push(r)}else if(s.association){let e=this.actors.get(s.association.actor).createConnectionPoint(t),i=this.usecases.get(s.association.usecase).createConnectionPoint(t),n=new y.Connector(t,"usecaseassociation",e,i,null);x.push(n)}else if(s.communicationpath){let e=this.nodes.get(s.communicationpath.firstnode).createConnectionPoint(t),i=this.nodes.get(s.communicationpath.secondnode).createConnectionPoint(t),n=new y.Connector(t,"communicationpath",e,i,null);x.push(n)}}d.doLayout(this),function(t,e,i){null!=e&&t.layoutConnectors(e);if(null!=i)for(var n=0;n<i.length;n++){let t=i[n];t.connectionPoint1.move(t.connectionPoint1.element.component.getSocketConnectionPoint("").x,t.connectionPoint1.element.component.getSocketConnectionPoint("").y),t.connectionPoint2.move(t.connectionPoint2.element.component.getBallConnectionPoint("").x,t.connectionPoint2.element.component.getBallConnectionPoint("").y)}}(d,x,m),function(t,e,i,n,s,o,r,a,l,c){for(let e of t)e.draw();for(let t of e)t.draw();for(let t of i)t.draw();for(let t of n)t.draw();for(let t of s)t.draw();for(let t of o)t.draw();for(let t of r)t.draw();for(let t of a)t.draw();for(let t of l)t.draw();for(let t of c)t.draw()}(this.classboxes.values(),this.classtemplates.values(),this.lifelines.values(),this.components.values(),this.nodes.values(),this.actors.values(),this.usecases.values(),x,this.messages,m)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.LayoutManager=class{constructor(t){this.layout=t,null==this.layout&&(this.layout={}),null==this.layout.elements&&(this.layout.elements={}),null==this.layout.connectorpositions&&(this.layout.connectorpositions={})}doLayout(t){for(let e of t.classboxes.values())this.setElementPosition(e);for(let e of t.lifelines.values())this.setElementPosition(e);for(let e of t.components.values())this.setElementPosition(e);for(let e of t.nodes.values())this.setElementPosition(e);for(let e of t.actors.values())this.setElementPosition(e);for(let e of t.usecases.values())this.setElementPosition(e);this.layoutMessages(t.lifelines,t.messages)}setElementPosition(t){let e=this.layout.elements[t.id];e&&e.position&&t.move(e.position.x,e.position.y)}layoutConnectors(t){for(var e=0;e<t.length;e++){let i=t[e],s=i.connectionPoint1,o=i.connectionPoint2,r=s.element.getConnectionPointsRectangle(),a=o.element.getConnectionPointsRectangle(),l=this.getConnectionPositions(r,a,i.type),c=s.element.id+"-"+o.element.id+"-"+i.type,h=this.layout.elements[c];if(h&&h.end)switch(h.end){case"top-center":l.end=n.ConnectionPointPosition.TopCenter;break;case"right-center":l.end=n.ConnectionPointPosition.RightCenter;break;case"bottom-center":l.end=n.ConnectionPointPosition.BottomCenter;break;case"left-center":l.end=n.ConnectionPointPosition.LeftCenter}s.setPosition(l.start),o.setPosition(l.end)}}layoutMessages(t,e){let i=0;for(let e of t.values())i=Math.max(i,e.getFirstConnectionPointPosition().y);let n=!0;for(let t of e){n?(n=!1,t.hasNonEmptyLabel()&&"creationmessage"!=t.type&&(i+=10)):t.hasNonEmptyLabel()&&(i+=16);let e=t.connectionPoint1,s=t.connectionPoint2,o=e.element,r=s.element;if("creationmessage"!=t.type&&"destructionmessage"!=t.type)o!=r?(e.move(o.getLineTopPosition().x,i),s.move(r.getLineTopPosition().x,i),i+=14):(e.move(o.getLineTopPosition().x,i),s.move(r.getLineTopPosition().x,i+20),"returnmessage"!=t.type&&(i+=34));else if("creationmessage"==t.type){r.move(r.x,i);let t=r.getCreationConnectionPointPosition().y;e.move(o.getLineTopPosition().x,t),s.move(r.getCreationConnectionPointPosition().x,t),i+=34}else"destructionmessage"==t.type&&(r.needToAdjustDestructionPosition()?s.move(r.getLineTopPosition().x,i+25):s.move(r.getLineTopPosition().x,i),i+=14)}if(e.length>0)for(let e of t.values())e.doLayout(),e.uptodate=!1;for(let t of e){let e=t.connectionPoint1,i=t.connectionPoint2,n=e.element,s=i.element;if(n==s){let t=e.y,o=e.x+n.getHorizontalOffset(t,"right");e.move(o,t);let r=i.y,a=i.x+s.getHorizontalOffset(r,"right");i.move(a,r)}else if(s.x>=n.x){let t=e.y,o=e.x+n.getHorizontalOffset(t,"right");e.move(o,t);let r=i.y,a=i.x+s.getHorizontalOffset(r,"left");i.move(a,r)}else{let t=e.y,o=e.x+n.getHorizontalOffset(t,"left");e.move(o,t);let r=i.y,a=i.x+s.getHorizontalOffset(r,"right");i.move(a,r)}t.uptodate=!1}}getConnectionPositions(t,e,i){let s={start:n.ConnectionPointPosition.TopCenter,end:n.ConnectionPointPosition.TopCenter};return"usecaseassociation"!=i?e.y+e.height<t.y?(s.start=n.ConnectionPointPosition.TopCenter,s.end=n.ConnectionPointPosition.BottomCenter):t.y+t.height<e.y?(s.start=n.ConnectionPointPosition.BottomCenter,s.end=n.ConnectionPointPosition.TopCenter):e.x+e.width<t.x?(s.start=n.ConnectionPointPosition.LeftCenter,s.end=n.ConnectionPointPosition.RightCenter):t.x+t.width<e.x&&(s.start=n.ConnectionPointPosition.RightCenter,s.end=n.ConnectionPointPosition.LeftCenter):t.x<e.x?(s.start=n.ConnectionPointPosition.RightCenter,s.end=n.ConnectionPointPosition.LeftCenter):t.x>e.x+e.width?(s.start=n.ConnectionPointPosition.LeftCenter,s.end=n.ConnectionPointPosition.RightCenter):t.y<e.y?(s.start=n.ConnectionPointPosition.BottomCenter,s.end=n.ConnectionPointPosition.TopCenter):(s.start=n.ConnectionPointPosition.TopCenter,s.end=n.ConnectionPointPosition.BottomCenter),s}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0),r=i(13),a=i(3);class l extends n.DiagramElement{constructor(t,e,i,n,s,o){super(t,"class-box",e.createID("class-box--"+i.name)),this.errors=o,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classDescription=i,this.canMove=n,this.style=s,this.connectionPointsRectangle=null,this.connectionPoints=[]}draw(){this.update();let t=this.layers.svg.group().addClass("class-box");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t)}createConnectionPoint(t){let e=new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){!function(t,e,i,n){var s=t.shapeLayer.group().addClass("class-box__shape");let o={width:0,height:0},l={top:t.y+1,left:t.x+1};o.height=n.getTopMargin("class-box");var c=t.textLayer.group().addClass("class-box__class-name-compartment"),h=a.SVGUtils.Text(c,l.left+n.getLeftMargin("class-box"),l.top+o.height,e.name);o.width=Math.max(o.width,h.bbox().width),o.height+=h.bbox().height+n.getBottomMargin("class-box");var g=l.top+o.height;let p=r.DrawingUtilities.addClassCompartmentText(l.left,g,t.textLayer,n,e.attributes,"class-box__attributes-compartment");o.width=Math.max(o.width,p.width),o.height+=p.height;var y=l.top+o.height;let u=r.DrawingUtilities.addClassCompartmentText(l.left,y,t.textLayer,n,e.operations,"class-box__operations-compartment");o.width=Math.max(o.width,u.width),o.height+=u.height,o.width>h.bbox().width&&h.dx((o.width-h.bbox().width)/2);o.width+=n.getLeftMargin("class-box")+n.getRightMargin("class-box");let d=a.SVGUtils.Rectangle(s,l.left,l.top,o.width,o.height);a.SVGUtils.Line(s,l.left,g,l.left+o.width,g),a.SVGUtils.Line(s,l.left,y,l.left+o.width,y),t.connectionPointsRectangle=d.bbox(),i&&(s.draggable(!0),s.on("dragmove.namespace",(function(e){t.fire("positionchanged")})),s.on("dragend.namespace",(function(e){t.fire("positionchanged")})))}(this,this.classDescription,this.canMove,this.style)}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}fire(t){if("positionchanged"==t)for(let t=0;t<this.connectionPoints.length;t++)this.connectionPoints[t].draw()}}e.ClassBox=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){let i={public:"+ ",protected:"# ",private:"- "}[e.visibility]+e.name;return e.return&&(i+=" : "+e.return),t.text(i)}e.DrawingUtilities=class{static addClassCompartmentText(t,e,i,s,o,r){e+=s.getTopMargin("classbox");let a=function(t,e,i,s,o){let r=0,a=0,l=i.group().addClass(o);for(var c=0;c<s.length;c++){let i=n(l,s[c]);i.move(t,e+a),r=Math.max(r,i.bbox().width),a+=i.bbox().height}return{width:r,height:a}}(t+s.getLeftMargin("classbox"),e,i,o,r);return a.height+=s.getTopMargin("classbox")+s.getBottomMargin("classbox"),a}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0),r=i(13),a=i(3);class l extends n.DiagramElement{constructor(t,e,i,n,s){super(t,"class-template",e.createID("class-template--"+i.name)),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classTemplateDescription=i,this.style=n,this.connectionPointsRectangle=null,this.connectionPoints=[]}draw(){this.update();let t=this.layers.svg.group().addClass("class-template");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t)}createConnectionPoint(t){let e=new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){var t=this.shapeLayer.group().addClass("class-template__shape");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};var n=this.textLayer.group().addClass("class-template__parameters-compartment"),s=a.SVGUtils.Text(n,i.left+this.style.getLeftMargin("class-template__parameters-compartment"),i.top+this.style.getTopMargin("class-template__parameters-compartment"),this.classTemplateDescription.parameters[0]);let o=this.style.getLeftMargin("class-template__parameters-compartment")+this.style.getRightMargin("class-template__parameters-compartment")+s.bbox().width,l=this.style.getTopMargin("class-template__parameters-compartment")+this.style.getBottomMargin("class-template__parameters-compartment")+s.bbox().height,c=i.top+this.style.getTopMargin("class-template__parameters-compartment")+s.bbox().height/2,h=c+this.style.getTopMargin("class-template"),g=this.textLayer.group().addClass("class-template__class-name-compartment"),p=a.SVGUtils.Text(g,i.left+this.style.getLeftMargin("class-template"),h,this.classTemplateDescription.name);e.width=Math.max(e.width,p.bbox().width),e.height=this.style.getTopMargin("class-template")+p.bbox().height+this.style.getBottomMargin("class-template");let y=i.top+e.height+s.bbox().height/2,u=r.DrawingUtilities.addClassCompartmentText(i.left,y,this.textLayer,this.style,this.classTemplateDescription.attributes,"class-template__attributes-compartment");e.width=Math.max(e.width,u.width),e.height+=u.height;let d=i.top+e.height+s.bbox().height/2,x=r.DrawingUtilities.addClassCompartmentText(i.left,d,this.textLayer,this.style,this.classTemplateDescription.operations,"class-template__operations-compartment");e.width=Math.max(e.width,x.width),e.height+=x.height,e.width>p.bbox().width&&p.dx((e.width-p.bbox().width)/2),e.width+=this.style.getLeftMargin("class-template")+this.style.getRightMargin("class-template");let m=a.SVGUtils.Rectangle(t,i.left,c,e.width,e.height);a.SVGUtils.Line(t,i.left,y,i.left+e.width,y),a.SVGUtils.Line(t,i.left,d,i.left+e.width,d),s.dx(e.width-o/2);a.SVGUtils.Rectangle(t,i.left+e.width-o/2,i.top,o,l).attr("stroke-dasharray","4, 4");this.connectionPointsRectangle=m.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.ClassTemplate=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(25),o=i(26),r=i(2),a=i(0);class l{constructor(t){this.svgParentGroup=t,this.x=0,this.y=0,this.width=15,this.height=20}move(t,e){this.x=t,this.y=e}draw(){let t=this.svgParentGroup.group().addClass("UMLComponentStereotype");t.rect(11,15).move(4+this.x,this.y),t.rect(8,3).move(this.x,this.y+3),t.rect(8,3).move(this.x,this.y+9)}}class c extends n.DiagramElement{constructor(t,e,i,n,r){if(super(t,"component",e),this.errors=r,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.svg=t,this.componentDescription=i,this.style=n,this.ballConnectors=[],this.socketConnectors=[],this.componentDescription.interfaces)for(let t=0;t<this.componentDescription.interfaces.length;t++){let e=new s.BallConnector(this.svg,this,this.componentDescription.interfaces[t].name);this.ballConnectors.push(e)}if(this.componentDescription.dependencies)for(let t=0;t<this.componentDescription.dependencies.length;t++){let e=new o.SocketConnector(this.svg,this,this.componentDescription.dependencies[t].name);this.socketConnectors.push(e)}}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}getSocketConnector(t){for(var e=0;e<this.socketConnectors.length;e++)if(this.socketConnectors[e].name==t)return this.socketConnectors[e];return null}getBallConnector(t){for(var e=0;e<this.ballConnectors.length;e++)if(this.ballConnectors[e].name==t)return this.ballConnectors[e];return null}createDependencyConnectionPoint(t,e){return new r.ConnectionPoint(t,this.getSocketConnector(e),a.ConnectionPointPosition.BottomCenter,this.errors)}createInterfaceConnectionPoint(t,e){return new r.ConnectionPoint(t,this.getBallConnector(e),a.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){this.layers.clearEachLayer();var t=this.shapeLayer.group().addClass("UMLComponent");let e=0;for(let t=0;t<this.ballConnectors.length;t++)e=Math.max(e,this.ballConnectors[t].width);let i={x:this.x+1,y:this.y+1},n={width:0,height:0};n.height=this.style.getTopMargin("component");let s=new l(t);n.height+=s.height;var o=this.textLayer.group().addClass("UMLComponentName").text(this.componentDescription.name).addClass("UMLComponentName").move(i.x+e+this.style.getLeftMargin("component"),i.y+n.height);n.width=Math.max(n.width,o.bbox().width),n.height+=o.bbox().height+this.style.getBottomMargin("component"),n.width+=this.style.getLeftMargin("component")+this.style.getRightMargin("component"),t.rect(n.width,n.height).move(i.x+e,i.y),s.move(i.x+e+(n.width-this.style.getRightMargin("component")-s.width),i.y+this.style.getTopMargin("component")),s.draw();for(let t=0;t<this.ballConnectors.length;t++)this.ballConnectors[t].moveConnectionPoint(i.x,i.y+n.height/2),this.layers.merge(this.ballConnectors[t].getLayers());for(let t=0;t<this.socketConnectors.length;t++)this.socketConnectors[t].moveConnectionPoint(i.x+n.width+e,i.y+n.height/2),this.layers.merge(this.socketConnectors[t].getLayers())}getBallConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.ballConnectors.length;t++)return this.ballConnectors[t].getAssemblyConnectionPoint()}getSocketConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.socketConnectors.length;t++)return this.socketConnectors[t].getAssemblyConnectionPoint()}}e.Component=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0),r=i(17),a=i(3),l=i(5);class c extends n.DiagramElement{constructor(t,e,i,n,s,o){super(t,"lifeline",e.createID("lifeline--"+i.name)),this.errors=o,this.headShapeLayer=this.layers.createLayer("head-shape"),this.headTextLayer=this.layers.createLayer("head-text"),this.lineLayer=this.layers.createLayer("line"),this.svg=t,this.lifelineDescription=i,this.style=n,this.log=s,this.lineTopPosition={x:0,y:0},this.boxHeight=0,this.connectionPoints=[],this.adjustmentNeeded=!1,this.lifelineLayout=new r.LifelineLayout}draw(){this.update();let t=this.layers.svg.group().addClass("lifeline");t.id(this.id);let e=a.SVGUtils.Group(t).addClass("lifeline__lifeline-head");this.layers.getLayer("head-shape").write(e),this.layers.getLayer("head-text").write(e),this.layers.getLayer("line").write(t)}createConnectionPoint(t,e){let i=new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push({point:i,type:e}),i}getLineTopPosition(){return this.uptodate||this.update(),this.lineTopPosition}getFirstConnectionPointPosition(){let t=this.getLineTopPosition();return t.y+=this.style.getExecutionSpecificationBarMargin()+this.style.getExecutionSpecificationBarOverhang(),t}getCreationConnectionPointPosition(){return this.uptodate||this.update(),{x:this.x,y:this.y+this.boxHeight/2}}getActiveLineWidth(){return this.style.getExecutionSpecificationBarWidth()}getHorizontalOffset(t,e){let i=0;return"right"==e?i=this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2):"left"==e&&(i=-this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2)),i}needToAdjustDestructionPosition(){return this.connectionPoints.length>1&&"return-start"!=this.connectionPoints[this.connectionPoints.length-1].type&&"creation-end"!=this.connectionPoints[this.connectionPoints.length-1].type&&(this.adjustmentNeeded=!0),this.adjustmentNeeded}doLayout(){this.lifelineLayout.dolayout(this.connectionPoints,this.adjustmentNeeded)}doUpdate(){this.log.info("Lifeline "+this.id+": updating"),this.layers.clearEachLayer();let t=this.headShapeLayer.group().addClass("lifeline-head__shape"),e=this.lineLayer.group().addClass("lifeline__lifeline-line");!function(t,e,i,n,s){let o={width:0,height:0},r={top:t.y+1,left:t.x+1};o.height=n.getTopMargin("lifeline");var l=t.headTextLayer.group().addClass("lifeline-head__text"),c=a.SVGUtils.Text(l,r.left+n.getLeftMargin("lifeline"),r.top+o.height,":"+i.name);o.width=Math.max(o.width,c.bbox().width),o.height+=c.bbox().height+n.getBottomMargin("lifeline"),o.width+=n.getLeftMargin("lifeline")+n.getRightMargin("lifeline"),a.SVGUtils.Rectangle(e,r.left,r.top,o.width,o.height),t.boxHeight=o.height,s.x=r.left+o.width/2,s.y=r.top+o.height}(this,t,this.lifelineDescription,this.style,this.lineTopPosition),function(t,e,i,n,s){let o=s.getExecutionSpecificationBarOverhang(),r="Lifeline "+t.id+": depth changes: [";for(let t of n)r+=" "+t[1];if(r+=" ]",t.log.debug(r),1==n.length)n[0][1]>0?(a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]-o),a.SVGUtils.Rectangle(e,t.lineTopPosition.x-4,n[0][0]-o,8,2*o)):a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]);else if(n.length>1){a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]-o);let i=0;for(let t of n)i=Math.max(i,t[1]);let s=[],r=[];for(let e=0;e<=i;e++)s.push(-1),r.push(new l.SVGLayer(t.svg));for(let e=1;e<n.length;e++){let i=n[e-1][1],l=n[e][1];if(t.log.trace("Lifeline "+t.id+": handling depth change "+e+" from "+i+" to "+l),0==i)t.log.trace("Lifeline "+t.id+": drawing line"),r[i].line(t.lineTopPosition.x,n[e-1][0],t.lineTopPosition.x,n[e][0]);else if(l>i)t.log.trace("Lifeline "+t.id+": deferring drawing"),s[i]=n[e-1][0];else if(l<=i){t.log.trace("Lifeline "+t.id+": drawing rectangle");let l=n[e-1][0];-1!=s[i]&&(l=s[i]);let c=5*(i-1);a.SVGUtils.Rectangle(r[i],t.lineTopPosition.x-4+c,l-o,8,n[e][0]-l+2*o),s[i]=-1}}0==n[n.length-2][1]&&n[n.length-1][1]>0&&r[n[n.length-1][1]].rect(8,2*o).move(t.lineTopPosition.x-4,n[n.length-1][0]-o);let c=n[n.length-1][0];for(let e=0;e<s.length;e++)-1!=s[e]&&r[e].rect(8,c-s[e]+2*o).move(t.lineTopPosition.x-4,s[e]-o);for(let t=0;t<r.length;t++)r[t].write(e)}}(this,e,this.lifelineDescription,this.lifelineLayout.depthChanges,this.style)}}e.Lifeline=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){t.push([e,1]),a(t)}function s(t,e){0==t.length?t.push([e,1]):t.push([e,t[t.length-1][1]+1]),a(t)}function o(t,e){let i=0,n=t.length;n>0&&(i=Math.max(0,t[n-1][1]-1)),t.push([e,i]),a(t)}function r(t,e){let i=t.length;0==i?t.push([e,1]):t.push([e,t[i-1][1]]),a(t)}function a(t){let e=t.length;e>=3&&t[e-3][1]==t[e-2][1]&&(t[e-2][0]=t[e-1][0],t[e-2][1]=t[e-1][1],t.pop())}e.LifelineLayout=class{constructor(){this.depthChanges=[]}getDepth(t){let e=0,i=-1;for(let n=0;n<this.depthChanges.length&&t>=this.depthChanges[n][0];n++)e=this.depthChanges[n][1],i=t>this.depthChanges[n][0]?n:n-1;return i>=0&&(e=Math.max(e,this.depthChanges[i][1])),e}dolayout(t,e){this.depthChanges.length=0;for(let l=0;l<t.length;l++){let c=t[l];switch(c.type){case"synchronous-start":n(this.depthChanges,c.point.y);break;case"synchronous-end":s(this.depthChanges,c.point.y);break;case"return-start":o(this.depthChanges,c.point.y);break;case"return-end":r(this.depthChanges,c.point.y);break;case"creation-start":n(this.depthChanges,c.point.y);break;case"destruction-end":e&&o(this.depthChanges,c.point.y-25),i=this.depthChanges,a=c.point.y,i.push([a,0])}}var i,a}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0),r=i(10);class a extends n.DiagramElement{constructor(t,e,i,n,s){super(t,"node",e.createID("node--"+i.name)),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.nodeDescription=i,this.style=n,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){var t=this.shapeLayer.group().addClass("UMLNode");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};e.height=this.style.getTopMargin("node");var n=this.textLayer.group().addClass("UMLNodeName").text(this.nodeDescription.name).move(i.left+this.style.getLeftMargin("node"),i.top+e.height+10);if(e.width=Math.max(e.width,n.bbox().width),e.height+=n.bbox().height+this.style.getBottomMargin("node"),e.width>n.bbox().width&&n.dx((e.width-n.bbox().width)/2),null!=this.nodeDescription.elements&&this.nodeDescription.elements.length>0){new r.Diagram(null).createFromJSON(this.layers.svg,this.id,this.nodeDescription,null)}e.width+=this.style.getLeftMargin("node")+this.style.getRightMargin("node");let s=i.left+12+","+i.top,o=i.left+e.width+10+","+i.top,a=i.left+e.width+","+(i.top+10),l=i.left+","+(i.top+10);t.polygon(s+" "+o+" "+a+" "+l);let c=i.left+e.width+","+(i.top+e.height+10),h=i.left+e.width+10+","+(i.top+e.height-1);t.polygon(o+" "+a+" "+c+" "+h);let g=t.rect(e.width,e.height).move(i.left,i.top+10);this.connectionPointsRectangle=g.bbox(),this.connectionPointsRectangle.cy-=5,this.connectionPointsRectangle.width+=5}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Node=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0),r=i(3);class a extends n.DiagramElement{constructor(t,e,i,n){super(t,"actor",e),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.actorDescription=i,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t={top:this.y,left:this.x},e=this.shapeLayer.group().addClass("UMLActor"),i=this.textLayer.group().text(this.actorDescription.name).move(t.left,t.top+35),n=i.bbox().width,s=(n-16)/2;r.SVGUtils.Circle(e,t.left+2+s,t.top+1,12),r.SVGUtils.Line(e,t.left+8+s,t.top+13,t.left+8+s,t.top+26),r.SVGUtils.Line(e,t.left+s,t.top+18,t.left+16+s,t.top+18),r.SVGUtils.Line(e,t.left+8+s,t.top+26,t.left+s,t.top+33),r.SVGUtils.Line(e,t.left+8+s,t.top+26,t.left+16+s,t.top+33),this.connectionPointsRectangle={x:t.left,y:t.top,w:n,width:n,height:35+i.bbox().height,h:35+i.bbox().height,x2:t.left+n,y2:t.top+35+i.bbox().height,cx:t.left+n/2,cy:t.top+(35+i.bbox().height)/2}}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Actor=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(0);class r extends n.DiagramElement{constructor(t,e,i,n){super(t,"usecase",e),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.useCaseDescription=i,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new s.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t=this.y,e=this.x,i=this.shapeLayer.group().addClass("UMLUseCase"),n=this.textLayer.group().text(this.useCaseDescription.title),s=i.ellipse(1.2*n.bbox().width,3*n.bbox().height).move(e+1,t+1);n.move(e+1+.1*n.bbox().width,t+1+n.bbox().height),this.connectionPointsRectangle=s.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.UseCase=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(0),o=i(27),r=i(3);class a extends n.DiagramElement{constructor(t,e,i,n,s){super(t,e,null),this.setType(e),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.connectionPoint1=i,this.connectionPoint2=n,this.label=null,null!=s&&(this.label=new o.Label(s)),null==this.label&&"creationmessage"==e&&(this.label=new o.Label("new"))}draw(){switch(this.update(),this.type){case"inheritance":case"composition":case"aggregation":case"creationmessage":case"synchronousmessage":case"returnmessage":case"destructionmessage":case"usecaseassociation":case"assemblyconnector":let t=this.layers.svg.group().addClass(this.cssParentGroupClass);t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t);break;default:this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}}hasNonEmptyLabel(){return null!=this.label&&!this.label.empty()}doUpdate(){if(this.layers.clearEachLayer(),"inheritance"==this.type){!function(t,e,i){let n=u(i.position),s=function(t,e){let i={x:0,y:0};switch(e){case y:i={x:t.x-12,y:t.y};break;case p:i={x:t.x+12,y:t.y};break;case h:i={x:t.x,y:t.y+12};break;case g:i={x:t.x,y:t.y-12}}return i}(i,n);d(t,e,s,n),function(t,e,i){let n={x:0,y:0},s={x:0,y:0};switch(i){case y:n={x:e.x-12,y:e.y-10},s={x:e.x-12,y:e.y+10};break;case p:n.x=e.x+12,n.y=e.y-10,s.x=e.x+12,s.y=e.y+10;break;case h:n.x=e.x-10,n.y=e.y+12,s.x=e.x+10,s.y=e.y+12;break;case g:n.x=e.x-10,n.y=e.y-12,s.x=e.x+10,s.y=e.y-12}let o=e.x+","+e.y+" "+n.x+","+n.y+" "+s.x+","+s.y;r.SVGUtils.Polygon(t,o)}(t,i,n)}(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("composition"==this.type){l(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("aggregation"==this.type){l(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("synchronousmessage"==this.type){let t=this.shapeLayer.group().addClass("connector__shape"),e=null;null!=this.label&&null!=this.label.text&&""!=this.label.text&&(e=this.textLayer.group().addClass("connector__label")),c(t,e,this.connectionPoint1,this.connectionPoint2,this.label)}else if("returnmessage"==this.type){if(null!=this.connectionPoint1.element&&this.connectionPoint1.element!=this.connectionPoint2.element){!function(t,e,i){r.SVGUtils.Line(t,e.x,e.y,i.x,e.y).attr("stroke-dasharray","4, 4"),i.x>=e.x?(r.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y-6),r.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y+6)):(r.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y-6),r.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y+6))}(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}}else if("creationmessage"==this.type){c(this.shapeLayer.group().addClass("connector__shape"),this.textLayer.group().addClass("connector__label"),this.connectionPoint1,this.connectionPoint2,this.label)}else if("destructionmessage"==this.type){!function(t,e){r.SVGUtils.Line(t,e.x-10,e.y-10,e.x+10,e.y+10),r.SVGUtils.Line(t,e.x-10,e.y+10,e.x+10,e.y-10)}(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint2)}else if("usecaseassociation"==this.type){!function(t,e,i){r.SVGUtils.Line(t,e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("assemblyconnector"==this.type){!function(t,e,i){if(e.x<i.x)r.SVGUtils.Line(t,e.x,e.y,i.x,i.y).attr("stroke-dasharray","8, 4");else{let n=e.y+(i.y-e.y)/2;r.SVGUtils.Line(t,e.x,e.y,e.x+25,e.y).attr("stroke-dasharray","8, 4"),r.SVGUtils.Line(t,e.x+25,e.y,e.x+25,n).attr("stroke-dasharray","8, 4"),r.SVGUtils.Line(t,e.x+25,n,i.x-35,n).attr("stroke-dasharray","8, 4"),r.SVGUtils.Line(t,i.x-35,n,i.x-35,i.y).attr("stroke-dasharray","8, 4"),r.SVGUtils.Line(t,i.x-35,i.y,i.x,i.y).attr("stroke-dasharray","8, 4")}r.SVGUtils.Line(t,i.x-13,i.y+5,i.x,i.y),r.SVGUtils.Line(t,i.x-13,i.y-5,i.x,i.y)}(this.shapeLayer.group().addClass("connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("communicationpath"==this.type){!function(t,e,i){r.SVGUtils.Line(t,e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("UMLCommunicationPath"),this.connectionPoint1,this.connectionPoint2)}}setType(t){switch(t){case"inheritance":this.cssParentGroupClass="connector connector--inheritance";break;case"composition":this.cssParentGroupClass="connector connector--composition";break;case"aggregation":this.cssParentGroupClass="connector connector--aggregation";break;case"creationmessage":this.cssParentGroupClass="connector connector--creation-message";break;case"synchronousmessage":this.cssParentGroupClass="connector connector--synchronous-message";break;case"returnmessage":this.cssParentGroupClass="connector connector--return-message";break;case"destructionmessage":this.cssParentGroupClass="connector connector--destruction-message";break;case"usecaseassociation":this.cssParentGroupClass="connector connector--use-case-association";break;case"assemblyconnector":this.cssParentGroupClass="connector connector--assembly"}}}function l(t,e,i){let n=u(i.position);d(t,e,function(t,e){let i={x:0,y:0};switch(e){case y:i={x:t.x-20,y:t.y};break;case p:i={x:t.x+20,y:t.y};break;case h:i={x:t.x,y:t.y+20};break;case g:i={x:t.x,y:t.y-20}}return i}(i,n),n),function(t,e,i){let n={x:0,y:0},s={x:0,y:0},o={x:0,y:0};switch(i){case y:n={x:e.x-10,y:e.y-8},s={x:e.x-20,y:e.y},o={x:e.x-10,y:e.y+8};break;case p:n={x:e.x+10,y:e.y-8},s={x:e.x+20,y:e.y},o={x:e.x+10,y:e.y+8};break;case h:n={x:e.x+8,y:e.y+10},s={x:e.x,y:e.y+20},o={x:e.x-8,y:e.y+10};break;case g:n={x:e.x+8,y:e.y-10},s={x:e.x,y:e.y-20},o={x:e.x-8,y:e.y-10}}let r=e.x+","+e.y+" "+n.x+","+n.y+" "+s.x+","+s.y+" "+o.x+","+o.y;t.polygon(r)}(t,i,n)}function c(t,e,i,n,s){if(null!=i.element&&i.element==n.element){if(null!=e&&null!=s&&null!=s.text&&""!=s.text){let t=r.SVGUtils.Text(e,0,0,s.text);t.move(i.x+8,i.y-t.bbox().height-3)}r.SVGUtils.Line(t,i.x,i.y,i.x+30,i.y),r.SVGUtils.Line(t,i.x+30,i.y,i.x+30,n.y),r.SVGUtils.Line(t,i.x+30,n.y,n.x+12,n.y);let o=n.x+","+n.y+" "+(n.x+12)+","+(n.y-6)+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,o)}else if(i.x<n.x){if(null!=e&&null!=s&&null!=s.text&&""!=s.text){let t=r.SVGUtils.Text(e,0,0,s.text),o=n.x-i.x;t.bbox().width<o?t.move(i.x+(o-t.bbox().width)/2,i.y-t.bbox().height-2):t.move(i.x+2,i.y-6-t.bbox().height-2)}r.SVGUtils.Line(t,i.x,i.y,n.x-12,n.y);let o=n.x-12+","+(n.y-6)+" "+n.x+","+n.y+" "+(n.x-12)+","+(n.y+6);r.SVGUtils.Polygon(t,o)}else if(i.x>n.x){if(null!=e&&null!=s&&null!=s.text&&""!=s.text){let t=r.SVGUtils.Text(e,0,0,s.text),o=i.x-n.x;t.bbox().width<o?t.move(n.x+(o-t.bbox().width)/2,n.y-t.bbox().height-2):t.move(n.x+2,n.y-6-t.bbox().height-2)}r.SVGUtils.Line(t,i.x,i.y,n.x+12,n.y);let o=n.x+12+","+(n.y-6)+" "+n.x+","+n.y+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,o)}else{if(null!=e&&null!=s&&null!=s.text&&""!=s.text){let t=r.SVGUtils.Text(e,0,0,s.text);t.move(i.x+8,i.y-t.bbox().height-3)}r.SVGUtils.Line(t,i.x,i.y,i.x+30,i.y),r.SVGUtils.Line(t,i.x+30,i.y,n.x+30,n.y),r.SVGUtils.Line(t,n.x+30,n.y,n.x+12,n.y);let o=n.x+","+n.y+" "+(n.x+12)+","+(n.y-6)+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,o)}}e.Connector=a;var h=0,g=1,p=2,y=3;function u(t){switch(t){case s.ConnectionPointPosition.TopCenter:return g;case s.ConnectionPointPosition.RightCenter:return p;case s.ConnectionPointPosition.BottomCenter:return h;case s.ConnectionPointPosition.LeftCenter:return y;default:throw new Error("Invalid value for ConnectionPointPosition")}}function d(t,e,i,n){switch(n){case h:case g:switch(function(t,e,i){let n=x.Straight;n=e.x==t.x?x.Straight:i==g&&t.position==s.ConnectionPointPosition.RightCenter?x.TopRightCorner:i==g&&t.position==s.ConnectionPointPosition.LeftCenter?x.TopLeftCorner:i==h&&t.position==s.ConnectionPointPosition.RightCenter?x.BottomRightCorner:i==h&&t.position==s.ConnectionPointPosition.LeftCenter?x.BottomLeftCorner:x.HorizontalStep;return n}(e,i,n)){case x.Straight:r.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case x.TopRightCorner:case x.TopLeftCorner:case x.BottomRightCorner:case x.BottomLeftCorner:r.SVGUtils.Line(t,e.x,e.y,i.x,e.y),r.SVGUtils.Line(t,i.x,e.y,i.x,i.y);break;case x.HorizontalStep:let n=i.y+(e.y-i.y)/2;r.SVGUtils.Line(t,e.x,e.y,e.x,n),r.SVGUtils.Line(t,e.x,n,i.x,n),r.SVGUtils.Line(t,i.x,n,i.x,i.y)}break;case p:case y:switch(function(t,e,i){let n=x.Straight;n=e.y==t.y?x.Straight:i==y&&t.position==s.ConnectionPointPosition.BottomCenter?x.BottomLeftCorner:i==y&&t.position==s.ConnectionPointPosition.TopCenter?x.TopLeftCorner:i==p&&t.position==s.ConnectionPointPosition.BottomCenter?x.BottomRightCorner:i==p&&t.position==s.ConnectionPointPosition.TopCenter?x.TopRightCorner:x.VerticalStep;return n}(e,i,n)){case x.Straight:r.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case x.TopRightCorner:case x.TopLeftCorner:case x.BottomRightCorner:case x.BottomLeftCorner:r.SVGUtils.Line(t,e.x,e.y,e.x,i.y),r.SVGUtils.Line(t,e.x,i.y,i.x,i.y);break;case x.VerticalStep:let n=i.x+(e.x-i.x)/2;r.SVGUtils.Line(t,e.x,e.y,n,e.y),r.SVGUtils.Line(t,n,e.y,n,i.y),r.SVGUtils.Line(t,n,i.y,i.x,i.y)}}}var x={Straight:0,TopRightCorner:1,TopLeftCorner:2,BottomRightCorner:3,BottomLeftCorner:4,HorizontalStep:5,VerticalStep:6}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Metrics=class{constructor(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Log=class{constructor(t){switch(t){case"none":this.level=0;break;case"error":this.level=1;break;case"warn":this.level=2;break;case"info":this.level=3;break;case"debug":this.level=4;break;case"trace":this.level=5}}error(t){this.level>=1&&console.error(t)}warn(t){this.level>=2&&console.warn(t)}info(t){this.level>=3&&console.log(t)}debug(t){this.level>=4&&console.log(t)}trace(t){this.level>=5&&console.log(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(6);e.Errors=n.Errors,e.UMLWebWidgetError=n.UMLWebWidgetError;const s=i(7);e.IDGenerator=s.IDGenerator;const o=i(8);e.Settings=o.Settings;const r=i(9);e.Style=r.Style;const a=i(10);e.Diagram=a.Diagram;const l=i(2);e.ConnectionPoint=l.ConnectionPoint;const c=i(0);e.ConnectionPointPosition=c.ConnectionPointPosition;const h=i(1);e.DiagramElement=h.DiagramElement;const g=i(21);e.Connector=g.Connector;const p=i(11);e.LayoutManager=p.LayoutManager;const y=i(17);e.LifelineLayout=y.LifelineLayout;const u=i(12);e.ClassBox=u.ClassBox;const d=i(14);e.ClassTemplate=d.ClassTemplate;const x=i(16);e.Lifeline=x.Lifeline;const m=i(19);e.Actor=m.Actor;const f=i(20);e.UseCase=f.UseCase;const C=i(15);e.Component=C.Component;const P=i(18);e.Node=P.Node;const b=i(28);e.Note=b.Note;const L=i(5);e.SVGLayer=L.SVGLayer;const w=i(4);e.SVGLayerSet=w.SVGLayerSet;const v=i(23);e.Log=v.Log;const S=i(22);e.Metrics=S.Metrics},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(4);var s=Symbol();e.BallConnector=class{constructor(t,e,i){this.svg=t,this.layers=new n.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[s]=this.textGroup.text(this.name).move(0,0),this.width=this[s].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[s].bbox().height+3,this.move(t,e)}update(){this.shapeLayer.clear(),this[s].move(this.x,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.circle(10).move(this.x+this.width/2-5,this.y+22),t.line(this.x+10+this.width/2-5,this.y+27,this.x+this.width,this.y+27)}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-4,y:this.y+this[s].bbox().height+5}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(4);var s=Symbol();e.SocketConnector=class{constructor(t,e,i){this.svg=t,this.layers=new n.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[s]=this.textGroup.text(this.name).move(0,0),this.width=this[s].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[s].bbox().height+6,this.move(t,e)}update(){this.shapeLayer.clear(),this[s].move(this.x+5,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.line(this.x,this.y+this[s].bbox().height+8,this.x+this.width/2,this.y+this[s].bbox().height+8);let e=this.svg.clip();e.rect(10,17).move(this.x+this.width/2-1,this.y+this[s].bbox().height,0),t.circle(15).move(this.x+this.width/2,this.y+this[s].bbox().height+1).clipWith(e),this.uptodate=!0}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-1+10,y:this.y+this[s].bbox().height+8}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Label=class{constructor(t){this.text=t}empty(){return null==this.text||""==this.text}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);class s extends n.DiagramElement{constructor(t,e,i,n){super(t,null,null),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.noteDescription=i,this.style=n}update(){this.uptodate=!0}}e.Note=s}])}));