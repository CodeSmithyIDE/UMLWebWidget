!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CodeSmithyUMLWebWidget=e():t.CodeSmithyUMLWebWidget=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=24)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t){switch(t){case"top-center":this.type=n;break;case"top-right":this.type=o;break;case"right-center":this.type=a;break;case"bottom-right":this.type=r;break;case"bottom-center":this.type=l;break;case"bottom-left":this.type=h;break;case"left-center":this.type=c;break;case"top-left":this.type=g}}equals(t){return this.type===t.type}static get TopCenter(){return y}static get TopRight(){return p}static get RightCenter(){return u}static get BottomRight(){return d}static get BottomCenter(){return m}static get BottomLeft(){return x}static get LeftCenter(){return f}static get TopLeft(){return C}}e.ConnectionPointPosition=s;let n=0,o=1,a=2,r=3,l=4,h=5,c=6,g=7,y=new s("top-center"),p=new s("top-right"),u=new s("right-center"),d=new s("bottom-right"),m=new s("bottom-center"),x=new s("bottom-left"),f=new s("left-center"),C=new s("top-left")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(3);var n=Symbol();e.DiagramElement=class{constructor(t,e,i){this.type=e,this.id=i,this.layers=new s.SVGLayerSet(t),this.uptodate=!1,this[n]={x:0,y:0}}getLayers(){return this.update(),this.layers}get x(){return this[n].x}get y(){return this[n].y}move(t,e){this.uptodate=!1,this[n].x=t,this[n].y=e}getConnectionPointsRectangle(){return this.update(),this.doGetConnectionPointsRectangle()}update(){this.uptodate||(this.doUpdate(),this.uptodate=!0)}doUpdate(){}doGetConnectionPointsRectangle(){return null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(0);class o extends s.DiagramElement{constructor(t,e,i,s){super(t,"connectionpoint",null),this.errors=s,this.element=e,this.position=i}setPosition(t){this.position=t;let e=0,i=0,s=this.element.getConnectionPointsRectangle();if(null!=s)switch(this.position){case n.ConnectionPointPosition.TopCenter:e=s.cx,i=s.y;break;case n.ConnectionPointPosition.RightCenter:e=s.x+s.width,i=s.cy;break;case n.ConnectionPointPosition.BottomCenter:e=s.cx,i=s.y+s.height;break;case n.ConnectionPointPosition.LeftCenter:e=s.x,i=s.cy}else this.errors.assertDebug(!1);this.move(e,i)}}e.ConnectionPoint=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(5);e.SVGLayerSet=class{constructor(t){this.svg=t,this.layers={}}getLayer(t){return this.layers[t]}createLayer(t){let e=new s.SVGLayer(this.svg);return this.layers[t]=e,e}merge(t){let e=this;Object.keys(e.layers).forEach((function(i){e.layers[i].merge(t.layers[i])}))}clearEachLayer(){let t=this;Object.keys(t.layers).forEach((function(e){t.layers[e].clear()}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGUtils=class{static Group(t){let e=t.group();return e.id(null),e}static Rectangle(t,e,i,s,n){let o=t.rect(s,n).move(e,i);return o.id(null),o}static Line(t,e,i,s,n){let o=t.line(e,i,s,n);return o.id(null),o}static Polygon(t,e){let i=t.polygon(e);return i.id(null),i}static Text(t,e,i,s){let n=t.text(s).move(e,i);return n.id(null),n}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGLayer=class{constructor(t){this.svg=t,this.defs=[]}group(t){let e=this.svg.defs().group();return t?e.id(t):e.id(null),this.defs.push(e),e}circle(t){let e=this.svg.defs().circle(t);return e.id(null),this.defs.push(e),e}line(t,e,i,s){let n=this.svg.defs().line(t,e,i,s);return n.id(null),this.defs.push(n),n}polygon(t){let e=this.svg.defs().polygon(t);return e.id(null),this.defs.push(e),e}rect(t,e){let i=this.svg.defs().rect(t,e);return i.id(null),this.defs.push(i),i}text(t){let e=this.svg.defs().text(t);return e.id(null),this.defs.push(e),e}write(t){let e=this;null==t&&(t=e.svg),e.defs.forEach((function(e){t.add(e)}))}merge(t){this.defs=this.defs.concat(t.defs)}clear(){this.defs.forEach((function(t){t.remove()})),this.defs.length=0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Errors=class{constructor(t){this.buildType=t}assertAlways(t){if(!t)throw console.error("Assertion failed"),window.alert("Assertion failed"),new Error}assertDebug(t){0==this.buildType&&this.assertAlways(t)}};class s extends Error{}e.UMLWebWidgetError=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IDGenerator=class{constructor(t){this.prefix=t}createID(t){return this.prefix+"--"+t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Settings=class{constructor(t){this.width=600,this.height=200,this.canMove=!1,this.canResize=!1,this.logLevel="none",this.buildType=1,t&&(t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.interactive&&t.interactive.canMove&&(this.canMove=t.interactive.canMove),null!=t.logLevel&&(this.logLevel=t.logLevel))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Style=class{constructor(){this.style=new Map,this.style.set("defaults",{"margin-left":12,"margin-right":12,"margin-top":9,"margin-bottom":9}),this.style.set("codesmithy-uml-diagram__classtemplate",{"margin-right":15,"margin-top":12}),this.style.set("classtemplate__parameters-compartment",{"margin-left":8,"margin-right":8,"margin-top":4,"margin-bottom":4}),this.style.set("lifeline",{"execution-specification-bar-width":8,"execution-specification-bar-overhang":5,"execution-specification-bar-margin":15})}getTopMargin(t){return this.getValueOrDefault(this,t,"margin-top")}getBottomMargin(t){return this.getValueOrDefault(this,t,"margin-bottom")}getLeftMargin(t){return this.getValueOrDefault(this,t,"margin-left")}getRightMargin(t){return this.getValueOrDefault(this,t,"margin-right")}getExecutionSpecificationBarWidth(){return this.style.get("lifeline")["execution-specification-bar-width"]}getExecutionSpecificationBarOverhang(){return this.style.get("lifeline")["execution-specification-bar-overhang"]}getExecutionSpecificationBarMargin(){return this.style.get("lifeline")["execution-specification-bar-margin"]}getValueOrDefault(t,e,i){return t.style.get(e)&&t.style.get(e)[i]?t.style.get(e)[i]:t.style.get("defaults")[i]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(8),n=i(9),o=i(11),a=i(12),r=i(14),l=i(15),h=i(16),c=i(18),g=i(19),y=i(20),p=i(21),u=i(22),d=i(23),m=i(7),x=i(6);e.Diagram=class{constructor(t){this.settings=new s.Settings(t),this.errors=new x.Errors(this.settings.buildType),this.log=new d.Log(this.settings.logLevel),this.metrics=new u.Metrics,this.diagramDescription={},this.classboxes=new Map,this.classtemplates=new Map,this.lifelines=new Map,this.components=new Map,this.nodes=new Map,this.actors=new Map,this.usecases=new Map,this.messages=[]}createFromDiv(t,e){let i=JSON.parse($("#"+t).text());$("#"+t).empty();var s=SVG(t).size(this.settings.width,this.settings.height);this.createFromJSON(s,t,i,e)}createFromJSON(t,e,i,s){let o=new m.IDGenerator(e);null==i&&(i={}),this.diagramDescription=i;let a=new n.Style;this.diagramDescription.elements&&this.drawDiagram(t,o,this.diagramDescription.elements,a,s,this.errors)}drawDiagram(t,e,i,s,n,u){let d=new o.LayoutManager(n),m=[],x=[];for(var f=0;f<i.length;f++){let n=i[f];if(n.class)this.classboxes.set(n.class.name,new a.ClassBox(t,e,n.class,this.settings.canMove,s,u));else if(n.classtemplate)this.classtemplates.set(n.classtemplate.name,new r.ClassTemplate(t,e,n.classtemplate,s,u));else if(n.lifeline)this.lifelines.set(n.lifeline.name,new h.Lifeline(t,e,n.lifeline,s,this.log,u));else if(n.component)this.components.set(n.component.name,new l.Component(t,n.component.name,n.component,s,u));else if(n.node)this.nodes.set(n.node.name,new c.Node(t,e,n.node,s,u));else if(n.actor)this.actors.set(n.actor.name,new g.Actor(t,n.actor.name,n.actor,u));else if(n.usecase)this.usecases.set(n.usecase.title,new y.UseCase(t,n.usecase.title,n.usecase,u));else if(n.relationship){let e,i,s=n.relationship.type;"inheritance"==n.relationship.type?(s="inheritance",e=this.classboxes.get(n.relationship.derivedclass),null==e&&(e=this.classtemplates.get(n.relationship.derivedclass)),i=this.classboxes.get(n.relationship.baseclass),null==i&&(i=this.classtemplates.get(n.relationship.baseclass))):"composition"!=n.relationship.type&&"aggregation"!=n.relationship.type||(s=n.relationship.type,e=this.classboxes.get(n.relationship.containedclass),i=this.classboxes.get(n.relationship.containingclass));let o=e.createConnectionPoint(t),a=i.createConnectionPoint(t),r=new p.Connector(t,s,o,a,null);m.push(r)}else if(n.messages)for(let e=0;e<n.messages.length;e++){let i,s=n.messages[e];if(s.synchronousmessage){let e=this.lifelines.get(s.synchronousmessage.caller),n=this.lifelines.get(s.synchronousmessage.callee),o=e.createConnectionPoint(t,"synchronous-start"),a=n.createConnectionPoint(t,"synchronous-end");i=new p.Connector(t,"synchronousmessage",o,a,s.synchronousmessage.name)}else if(s.returnmessage){let e=this.lifelines.get(s.returnmessage.callee),n=this.lifelines.get(s.returnmessage.caller),o=e.createConnectionPoint(t,"return-start"),a=n.createConnectionPoint(t,"return-end");i=new p.Connector(t,"returnmessage",o,a,null)}else if(s.creationmessage){let e=this.lifelines.get(s.creationmessage.caller),n=this.lifelines.get(s.creationmessage.callee),o=e.createConnectionPoint(t,"creation-start"),a=n.createConnectionPoint(t,"creation-end");i=new p.Connector(t,"creationmessage",o,a,null)}else if(s.destructionmessage){let e=this.lifelines.get(s.destructionmessage.callee).createConnectionPoint(t,"destruction-end");i=new p.Connector(t,"destructionmessage",e,e,"")}this.messages.push(i)}else if(n.assemblyconnector){let e=this.components.get(n.assemblyconnector.consumer),i=this.components.get(n.assemblyconnector.provider),s=e.createDependencyConnectionPoint(t,n.assemblyconnector.interface),o=i.createInterfaceConnectionPoint(t,n.assemblyconnector.interface),a=new p.Connector(t,"assemblyconnector",s,o,null);x.push(a)}else if(n.association){let e=this.actors.get(n.association.actor).createConnectionPoint(t),i=this.usecases.get(n.association.usecase).createConnectionPoint(t),s=new p.Connector(t,"usecaseassociation",e,i,null);m.push(s)}else if(n.communicationpath){let e=this.nodes.get(n.communicationpath.firstnode).createConnectionPoint(t),i=this.nodes.get(n.communicationpath.secondnode).createConnectionPoint(t),s=new p.Connector(t,"communicationpath",e,i,null);m.push(s)}}d.doLayout(this),function(t,e,i){null!=e&&t.layoutConnectors(e);if(null!=i)for(var s=0;s<i.length;s++){let t=i[s];t.connectionPoint1.move(t.connectionPoint1.element.component.getSocketConnectionPoint("").x,t.connectionPoint1.element.component.getSocketConnectionPoint("").y),t.connectionPoint2.move(t.connectionPoint2.element.component.getBallConnectionPoint("").x,t.connectionPoint2.element.component.getBallConnectionPoint("").y)}}(d,m,x),function(t,e,i,s,n,o,a,r,l,h){for(let e of t)e.draw();for(let t of e)t.draw();for(let t of i)t.draw();for(let t of s)t.draw();for(let t of n)t.draw();for(let t of o)t.draw();for(let t of a)t.draw();for(let t of r)t.draw();for(let t of l)t.draw();for(let t of h)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write()}(this.classboxes.values(),this.classtemplates.values(),this.lifelines.values(),this.components.values(),this.nodes.values(),this.actors.values(),this.usecases.values(),m,this.messages,x)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);e.LayoutManager=class{constructor(t){this.layout=t,null==this.layout&&(this.layout={}),null==this.layout.elements&&(this.layout.elements={}),null==this.layout.connectorpositions&&(this.layout.connectorpositions={})}doLayout(t){for(let e of t.classboxes.values())this.setElementPosition(e);for(let e of t.lifelines.values())this.setElementPosition(e);for(let e of t.components.values())this.setElementPosition(e);for(let e of t.nodes.values())this.setElementPosition(e);for(let e of t.actors.values())this.setElementPosition(e);for(let e of t.usecases.values())this.setElementPosition(e);this.layoutMessages(t.lifelines,t.messages)}setElementPosition(t){let e=this.layout.elements[t.id];e&&e.position&&t.move(e.position.x,e.position.y)}layoutConnectors(t){for(var e=0;e<t.length;e++){let i=t[e],n=i.connectionPoint1,o=i.connectionPoint2,a=n.element.getConnectionPointsRectangle(),r=o.element.getConnectionPointsRectangle(),l=this.getConnectionPositions(a,r,i.type),h=n.element.id+"-"+o.element.id+"-"+i.type,c=this.layout.elements[h];if(c&&c.end)switch(c.end){case"top-center":l.end=s.ConnectionPointPosition.TopCenter;break;case"right-center":l.end=s.ConnectionPointPosition.RightCenter;break;case"bottom-center":l.end=s.ConnectionPointPosition.BottomCenter;break;case"left-center":l.end=s.ConnectionPointPosition.LeftCenter}n.setPosition(l.start),o.setPosition(l.end)}}layoutMessages(t,e){let i=0;for(let e of t.values())i=Math.max(i,e.getFirstConnectionPointPosition().y);let s=!0;for(let t of e){s?(s=!1,t.hasNonEmptyLabel()&&"creationmessage"!=t.type&&(i+=10)):t.hasNonEmptyLabel()&&(i+=16);let e=t.connectionPoint1,n=t.connectionPoint2,o=e.element,a=n.element;if("creationmessage"!=t.type&&"destructionmessage"!=t.type)o!=a?(e.move(o.getLineTopPosition().x,i),n.move(a.getLineTopPosition().x,i),i+=14):(e.move(o.getLineTopPosition().x,i),n.move(a.getLineTopPosition().x,i+20),"returnmessage"!=t.type&&(i+=34));else if("creationmessage"==t.type){a.move(a.x,i);let t=a.getCreationConnectionPointPosition().y;e.move(o.getLineTopPosition().x,t),n.move(a.getCreationConnectionPointPosition().x,t),i+=34}else"destructionmessage"==t.type&&(a.needToAdjustDestructionPosition()?n.move(a.getLineTopPosition().x,i+25):n.move(a.getLineTopPosition().x,i),i+=14)}if(e.length>0)for(let e of t.values())e.doLayout(),e.uptodate=!1;for(let t of e){let e=t.connectionPoint1,i=t.connectionPoint2,s=e.element,n=i.element;if(s==n){let t=e.y,o=e.x+s.getHorizontalOffset(t,"right");e.move(o,t);let a=i.y,r=i.x+n.getHorizontalOffset(a,"right");i.move(r,a)}else if(n.x>=s.x){let t=e.y,o=e.x+s.getHorizontalOffset(t,"right");e.move(o,t);let a=i.y,r=i.x+n.getHorizontalOffset(a,"left");i.move(r,a)}else{let t=e.y,o=e.x+s.getHorizontalOffset(t,"left");e.move(o,t);let a=i.y,r=i.x+n.getHorizontalOffset(a,"right");i.move(r,a)}t.uptodate=!1}}getConnectionPositions(t,e,i){let n={start:s.ConnectionPointPosition.TopCenter,end:s.ConnectionPointPosition.TopCenter};return"usecaseassociation"!=i?e.y+e.height<t.y?(n.start=s.ConnectionPointPosition.TopCenter,n.end=s.ConnectionPointPosition.BottomCenter):t.y+t.height<e.y?(n.start=s.ConnectionPointPosition.BottomCenter,n.end=s.ConnectionPointPosition.TopCenter):e.x+e.width<t.x?(n.start=s.ConnectionPointPosition.LeftCenter,n.end=s.ConnectionPointPosition.RightCenter):t.x+t.width<e.x&&(n.start=s.ConnectionPointPosition.RightCenter,n.end=s.ConnectionPointPosition.LeftCenter):t.x<e.x?(n.start=s.ConnectionPointPosition.RightCenter,n.end=s.ConnectionPointPosition.LeftCenter):t.x>e.x+e.width?(n.start=s.ConnectionPointPosition.LeftCenter,n.end=s.ConnectionPointPosition.RightCenter):t.y<e.y?(n.start=s.ConnectionPointPosition.BottomCenter,n.end=s.ConnectionPointPosition.TopCenter):(n.start=s.ConnectionPointPosition.TopCenter,n.end=s.ConnectionPointPosition.BottomCenter),n}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0),a=i(13),r=i(4);class l extends s.DiagramElement{constructor(t,e,i,s,n,o){super(t,"classbox",e.createID("classbox--"+i.name)),this.errors=o,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classDescription=i,this.canMove=s,this.style=n,this.connectionPointsRectangle=null,this.connectionPoints=[]}draw(){this.update();let t=this.layers.svg.group().addClass("codesmithy-uml-diagram__classbox");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t)}createConnectionPoint(t){let e=new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){!function(t,e,i,s){var n=t.shapeLayer.group().addClass("classbox__shape");let o={width:0,height:0},l={top:t.y+1,left:t.x+1};o.height=s.getTopMargin("codesmithy-uml-diagram__classbox");var h=t.textLayer.group().addClass("classbox__class-name-compartment"),c=r.SVGUtils.Text(h,l.left+s.getLeftMargin("codesmithy-uml-diagram__classbox"),l.top+o.height,e.name);o.width=Math.max(o.width,c.bbox().width),o.height+=c.bbox().height+s.getBottomMargin("codesmithy-uml-diagram__classbox");var g=l.top+o.height;let y=a.DrawingUtilities.addClassCompartmentText(l.left,g,t.textLayer,s,e.attributes,"classbox__attributes-compartment");o.width=Math.max(o.width,y.width),o.height+=y.height;var p=l.top+o.height;let u=a.DrawingUtilities.addClassCompartmentText(l.left,p,t.textLayer,s,e.operations,"classbox__operations-compartment");o.width=Math.max(o.width,u.width),o.height+=u.height,o.width>c.bbox().width&&c.dx((o.width-c.bbox().width)/2);o.width+=s.getLeftMargin("codesmithy-uml-diagram__classbox")+s.getRightMargin("codesmithy-uml-diagram__classbox");let d=r.SVGUtils.Rectangle(n,l.left,l.top,o.width,o.height);r.SVGUtils.Line(n,l.left,g,l.left+o.width,g),r.SVGUtils.Line(n,l.left,p,l.left+o.width,p),t.connectionPointsRectangle=d.bbox(),i&&(n.draggable(!0),n.on("dragmove.namespace",(function(e){t.fire("positionchanged")})),n.on("dragend.namespace",(function(e){t.fire("positionchanged")})))}(this,this.classDescription,this.canMove,this.style)}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}fire(t){if("positionchanged"==t)for(let t=0;t<this.connectionPoints.length;t++)this.connectionPoints[t].draw()}}e.ClassBox=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){let i={public:"+ ",protected:"# ",private:"- "}[e.visibility]+e.name;return e.return&&(i+=" : "+e.return),t.text(i)}e.DrawingUtilities=class{static addClassCompartmentText(t,e,i,n,o,a){e+=n.getTopMargin("classbox");let r=function(t,e,i,n,o){let a=0,r=0,l=i.group().addClass(o);for(var h=0;h<n.length;h++){let i=s(l,n[h]);i.move(t,e+r),a=Math.max(a,i.bbox().width),r+=i.bbox().height}return{width:a,height:r}}(t+n.getLeftMargin("classbox"),e,i,o,a);return r.height+=n.getTopMargin("classbox")+n.getBottomMargin("classbox"),r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0),a=i(13),r=i(4);class l extends s.DiagramElement{constructor(t,e,i,s,n){super(t,"classtemplate",e.createID("classtemplate--"+i.name)),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classTemplateDescription=i,this.style=s,this.connectionPointsRectangle=null,this.connectionPoints=[]}draw(){this.update();let t=this.layers.svg.group().addClass("codesmithy-uml-diagram__classtemplate");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t)}createConnectionPoint(t){let e=new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){var t=this.shapeLayer.group().addClass("classtemplate__shape");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};var s=this.textLayer.group().addClass("classtemplate__parameters-compartment"),n=r.SVGUtils.Text(s,i.left+this.style.getLeftMargin("classtemplate__parameters-compartment"),i.top+this.style.getTopMargin("classtemplate__parameters-compartment"),this.classTemplateDescription.parameters[0]);let o=this.style.getLeftMargin("classtemplate__parameters-compartment")+this.style.getRightMargin("classtemplate__parameters-compartment")+n.bbox().width,l=this.style.getTopMargin("classtemplate__parameters-compartment")+this.style.getBottomMargin("classtemplate__parameters-compartment")+n.bbox().height,h=i.top+this.style.getTopMargin("classtemplate__parameters-compartment")+n.bbox().height/2,c=h+this.style.getTopMargin("codesmithy-uml-diagram__classtemplate"),g=this.textLayer.group().addClass("classtemplate__class-name-compartment"),y=r.SVGUtils.Text(g,i.left+this.style.getLeftMargin("codesmithy-uml-diagram__classtemplate"),c,this.classTemplateDescription.name);e.width=Math.max(e.width,y.bbox().width),e.height=this.style.getTopMargin("codesmithy-uml-diagram__classtemplate")+y.bbox().height+this.style.getBottomMargin("codesmithy-uml-diagram__classtemplate");let p=i.top+e.height+n.bbox().height/2,u=a.DrawingUtilities.addClassCompartmentText(i.left,p,this.textLayer,this.style,this.classTemplateDescription.attributes,"classtemplate__attributes-compartment");e.width=Math.max(e.width,u.width),e.height+=u.height;let d=i.top+e.height+n.bbox().height/2,m=a.DrawingUtilities.addClassCompartmentText(i.left,d,this.textLayer,this.style,this.classTemplateDescription.operations,"classtemplate__operations-compartment");e.width=Math.max(e.width,m.width),e.height+=m.height,e.width>y.bbox().width&&y.dx((e.width-y.bbox().width)/2),e.width+=this.style.getLeftMargin("codesmithy-uml-diagram__classtemplate")+this.style.getRightMargin("codesmithy-uml-diagram__classtemplate");let x=r.SVGUtils.Rectangle(t,i.left,h,e.width,e.height);r.SVGUtils.Line(t,i.left,p,i.left+e.width,p),r.SVGUtils.Line(t,i.left,d,i.left+e.width,d),n.dx(e.width-o/2);r.SVGUtils.Rectangle(t,i.left+e.width-o/2,i.top,o,l).attr("stroke-dasharray","4, 4");this.connectionPointsRectangle=x.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.ClassTemplate=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(25),o=i(26),a=i(2),r=i(0);class l{constructor(t){this.svgParentGroup=t,this.x=0,this.y=0,this.width=15,this.height=20}move(t,e){this.x=t,this.y=e}draw(){let t=this.svgParentGroup.group().addClass("UMLComponentStereotype");t.rect(11,15).move(4+this.x,this.y),t.rect(8,3).move(this.x,this.y+3),t.rect(8,3).move(this.x,this.y+9)}}class h extends s.DiagramElement{constructor(t,e,i,s,a){if(super(t,"component",e),this.errors=a,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.svg=t,this.componentDescription=i,this.style=s,this.ballConnectors=[],this.socketConnectors=[],this.componentDescription.interfaces)for(let t=0;t<this.componentDescription.interfaces.length;t++){let e=new n.BallConnector(this.svg,this,this.componentDescription.interfaces[t].name);this.ballConnectors.push(e)}if(this.componentDescription.dependencies)for(let t=0;t<this.componentDescription.dependencies.length;t++){let e=new o.SocketConnector(this.svg,this,this.componentDescription.dependencies[t].name);this.socketConnectors.push(e)}}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}getSocketConnector(t){for(var e=0;e<this.socketConnectors.length;e++)if(this.socketConnectors[e].name==t)return this.socketConnectors[e];return null}getBallConnector(t){for(var e=0;e<this.ballConnectors.length;e++)if(this.ballConnectors[e].name==t)return this.ballConnectors[e];return null}createDependencyConnectionPoint(t,e){return new a.ConnectionPoint(t,this.getSocketConnector(e),r.ConnectionPointPosition.BottomCenter,this.errors)}createInterfaceConnectionPoint(t,e){return new a.ConnectionPoint(t,this.getBallConnector(e),r.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){this.layers.clearEachLayer();var t=this.shapeLayer.group().addClass("UMLComponent");let e=0;for(let t=0;t<this.ballConnectors.length;t++)e=Math.max(e,this.ballConnectors[t].width);let i={x:this.x+1,y:this.y+1},s={width:0,height:0};s.height=this.style.getTopMargin("component");let n=new l(t);s.height+=n.height;var o=this.textLayer.group().addClass("UMLComponentName").text(this.componentDescription.name).addClass("UMLComponentName").move(i.x+e+this.style.getLeftMargin("component"),i.y+s.height);s.width=Math.max(s.width,o.bbox().width),s.height+=o.bbox().height+this.style.getBottomMargin("component"),s.width+=this.style.getLeftMargin("component")+this.style.getRightMargin("component"),t.rect(s.width,s.height).move(i.x+e,i.y),n.move(i.x+e+(s.width-this.style.getRightMargin("component")-n.width),i.y+this.style.getTopMargin("component")),n.draw();for(let t=0;t<this.ballConnectors.length;t++)this.ballConnectors[t].moveConnectionPoint(i.x,i.y+s.height/2),this.layers.merge(this.ballConnectors[t].getLayers());for(let t=0;t<this.socketConnectors.length;t++)this.socketConnectors[t].moveConnectionPoint(i.x+s.width+e,i.y+s.height/2),this.layers.merge(this.socketConnectors[t].getLayers())}getBallConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.ballConnectors.length;t++)return this.ballConnectors[t].getAssemblyConnectionPoint()}getSocketConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.socketConnectors.length;t++)return this.socketConnectors[t].getAssemblyConnectionPoint()}}e.Component=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0),a=i(17),r=i(4),l=i(5);class h extends s.DiagramElement{constructor(t,e,i,s,n,o){super(t,"lifeline",e.createID("lifeline--"+i.name)),this.errors=o,this.headShapeLayer=this.layers.createLayer("head-shape"),this.headTextLayer=this.layers.createLayer("head-text"),this.lineLayer=this.layers.createLayer("line"),this.svg=t,this.lifelineDescription=i,this.style=s,this.log=n,this.lineTopPosition={x:0,y:0},this.boxHeight=0,this.connectionPoints=[],this.adjustmentNeeded=!1,this.lifelineLayout=new a.LifelineLayout}draw(){this.update();let t=this.layers.svg.group().addClass("codesmithy-uml-diagram__lifeline");t.id(this.id);let e=r.SVGUtils.Group(t).addClass("lifeline__lifeline-head");this.layers.getLayer("head-shape").write(e),this.layers.getLayer("head-text").write(e),this.layers.getLayer("line").write(t)}createConnectionPoint(t,e){let i=new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push({point:i,type:e}),i}getLineTopPosition(){return this.uptodate||this.update(),this.lineTopPosition}getFirstConnectionPointPosition(){let t=this.getLineTopPosition();return t.y+=this.style.getExecutionSpecificationBarMargin()+this.style.getExecutionSpecificationBarOverhang(),t}getCreationConnectionPointPosition(){return this.uptodate||this.update(),{x:this.x,y:this.y+this.boxHeight/2}}getActiveLineWidth(){return this.style.getExecutionSpecificationBarWidth()}getHorizontalOffset(t,e){let i=0;return"right"==e?i=this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2):"left"==e&&(i=-this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2)),i}needToAdjustDestructionPosition(){return this.connectionPoints.length>1&&"return-start"!=this.connectionPoints[this.connectionPoints.length-1].type&&"creation-end"!=this.connectionPoints[this.connectionPoints.length-1].type&&(this.adjustmentNeeded=!0),this.adjustmentNeeded}doLayout(){this.lifelineLayout.dolayout(this.connectionPoints,this.adjustmentNeeded)}doUpdate(){this.log.info("Lifeline "+this.id+": updating"),this.layers.clearEachLayer();let t=this.headShapeLayer.group().addClass("lifeline-head__shape"),e=this.lineLayer.group().addClass("lifeline__lifeline-line");!function(t,e,i,s,n){let o={width:0,height:0},a={top:t.y+1,left:t.x+1};o.height=s.getTopMargin("lifeline");var l=t.headTextLayer.group().addClass("lifeline-head__text"),h=r.SVGUtils.Text(l,a.left+s.getLeftMargin("lifeline"),a.top+o.height,":"+i.name);o.width=Math.max(o.width,h.bbox().width),o.height+=h.bbox().height+s.getBottomMargin("lifeline"),o.width+=s.getLeftMargin("lifeline")+s.getRightMargin("lifeline"),r.SVGUtils.Rectangle(e,a.left,a.top,o.width,o.height),t.boxHeight=o.height,n.x=a.left+o.width/2,n.y=a.top+o.height}(this,t,this.lifelineDescription,this.style,this.lineTopPosition),function(t,e,i,s,n){let o=n.getExecutionSpecificationBarOverhang(),a="Lifeline "+t.id+": depth changes: [";for(let t of s)a+=" "+t[1];if(a+=" ]",t.log.debug(a),1==s.length)s[0][1]>0?(r.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,s[0][0]-o),r.SVGUtils.Rectangle(e,t.lineTopPosition.x-4,s[0][0]-o,8,2*o)):r.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,s[0][0]);else if(s.length>1){r.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,s[0][0]-o);let i=0;for(let t of s)i=Math.max(i,t[1]);let n=[],a=[];for(let e=0;e<=i;e++)n.push(-1),a.push(new l.SVGLayer(t.svg));for(let e=1;e<s.length;e++){let i=s[e-1][1],l=s[e][1];if(t.log.trace("Lifeline "+t.id+": handling depth change "+e+" from "+i+" to "+l),0==i)t.log.trace("Lifeline "+t.id+": drawing line"),a[i].line(t.lineTopPosition.x,s[e-1][0],t.lineTopPosition.x,s[e][0]);else if(l>i)t.log.trace("Lifeline "+t.id+": deferring drawing"),n[i]=s[e-1][0];else if(l<=i){t.log.trace("Lifeline "+t.id+": drawing rectangle");let l=s[e-1][0];-1!=n[i]&&(l=n[i]);let h=5*(i-1);r.SVGUtils.Rectangle(a[i],t.lineTopPosition.x-4+h,l-o,8,s[e][0]-l+2*o),n[i]=-1}}0==s[s.length-2][1]&&s[s.length-1][1]>0&&a[s[s.length-1][1]].rect(8,2*o).move(t.lineTopPosition.x-4,s[s.length-1][0]-o);let h=s[s.length-1][0];for(let e=0;e<n.length;e++)-1!=n[e]&&a[e].rect(8,h-n[e]+2*o).move(t.lineTopPosition.x-4,n[e]-o);for(let t=0;t<a.length;t++)a[t].write(e)}}(this,e,this.lifelineDescription,this.lifelineLayout.depthChanges,this.style)}}e.Lifeline=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){t.push([e,1]),r(t)}function n(t,e){0==t.length?t.push([e,1]):t.push([e,t[t.length-1][1]+1]),r(t)}function o(t,e){let i=0,s=t.length;s>0&&(i=Math.max(0,t[s-1][1]-1)),t.push([e,i]),r(t)}function a(t,e){let i=t.length;0==i?t.push([e,1]):t.push([e,t[i-1][1]]),r(t)}function r(t){let e=t.length;e>=3&&t[e-3][1]==t[e-2][1]&&(t[e-2][0]=t[e-1][0],t[e-2][1]=t[e-1][1],t.pop())}e.LifelineLayout=class{constructor(){this.depthChanges=[]}getDepth(t){let e=0,i=-1;for(let s=0;s<this.depthChanges.length&&t>=this.depthChanges[s][0];s++)e=this.depthChanges[s][1],i=t>this.depthChanges[s][0]?s:s-1;return i>=0&&(e=Math.max(e,this.depthChanges[i][1])),e}dolayout(t,e){this.depthChanges.length=0;for(let l=0;l<t.length;l++){let h=t[l];switch(h.type){case"synchronous-start":s(this.depthChanges,h.point.y);break;case"synchronous-end":n(this.depthChanges,h.point.y);break;case"return-start":o(this.depthChanges,h.point.y);break;case"return-end":a(this.depthChanges,h.point.y);break;case"creation-start":s(this.depthChanges,h.point.y);break;case"destruction-end":e&&o(this.depthChanges,h.point.y-25),i=this.depthChanges,r=h.point.y,i.push([r,0])}}var i,r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0),a=i(10);class r extends s.DiagramElement{constructor(t,e,i,s,n){super(t,"node",e.createID("node--"+i.name)),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.nodeDescription=i,this.style=s,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){var t=this.shapeLayer.group().addClass("UMLNode");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};e.height=this.style.getTopMargin("node");var s=this.textLayer.group().addClass("UMLNodeName").text(this.nodeDescription.name).move(i.left+this.style.getLeftMargin("node"),i.top+e.height+10);if(e.width=Math.max(e.width,s.bbox().width),e.height+=s.bbox().height+this.style.getBottomMargin("node"),e.width>s.bbox().width&&s.dx((e.width-s.bbox().width)/2),null!=this.nodeDescription.elements&&this.nodeDescription.elements.length>0){new a.Diagram(null).createFromJSON(this.layers.svg,this.id,this.nodeDescription,null)}e.width+=this.style.getLeftMargin("node")+this.style.getRightMargin("node");let n=i.left+12+","+i.top,o=i.left+e.width+10+","+i.top,r=i.left+e.width+","+(i.top+10),l=i.left+","+(i.top+10);t.polygon(n+" "+o+" "+r+" "+l);let h=i.left+e.width+","+(i.top+e.height+10),c=i.left+e.width+10+","+(i.top+e.height-1);t.polygon(o+" "+r+" "+h+" "+c);let g=t.rect(e.width,e.height).move(i.left,i.top+10);this.connectionPointsRectangle=g.bbox(),this.connectionPointsRectangle.cy-=5,this.connectionPointsRectangle.width+=5}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Node=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0);class a extends s.DiagramElement{constructor(t,e,i,s){super(t,"actor",e),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.actorDescription=i,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t={top:this.y,left:this.x},e=this.shapeLayer.group().addClass("UMLActor"),i=this.textLayer.group().text(this.actorDescription.name).move(t.left,t.top+35),s=i.bbox().width,n=(s-16)/2;e.circle(12).move(t.left+2+n,t.top+1),e.line(t.left+8+n,t.top+13,t.left+8+n,t.top+26),e.line(t.left+n,t.top+18,t.left+16+n,t.top+18),e.line(t.left+8+n,t.top+26,t.left+n,t.top+33),e.line(t.left+8+n,t.top+26,t.left+16+n,t.top+33),this.connectionPointsRectangle={x:t.left,y:t.top,w:s,width:s,height:35+i.bbox().height,h:35+i.bbox().height,x2:t.left+s,y2:t.top+35+i.bbox().height,cx:t.left+s/2,cy:t.top+(35+i.bbox().height)/2}}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Actor=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(2),o=i(0);class a extends s.DiagramElement{constructor(t,e,i,s){super(t,"usecase",e),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.useCaseDescription=i,this.connectionPointsRectangle=null}draw(){this.update(),this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}createConnectionPoint(t){return new n.ConnectionPoint(t,this,o.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t=this.y,e=this.x,i=this.shapeLayer.group().addClass("UMLUseCase"),s=this.textLayer.group().text(this.useCaseDescription.title),n=i.ellipse(1.2*s.bbox().width,3*s.bbox().height).move(e+1,t+1);s.move(e+1+.1*s.bbox().width,t+1+s.bbox().height),this.connectionPointsRectangle=n.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.UseCase=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),n=i(0),o=i(27),a=i(4);class r extends s.DiagramElement{constructor(t,e,i,s,n){super(t,e,null),this.setType(e),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.connectionPoint1=i,this.connectionPoint2=s,this.label=null,null!=n&&(this.label=new o.Label(n)),null==this.label&&"creationmessage"==e&&(this.label=new o.Label("new"))}draw(){switch(this.update(),this.type){case"inheritance":case"composition":case"aggregation":case"creationmessage":case"synchronousmessage":case"returnmessage":case"destructionmessage":let t=this.layers.svg.group().addClass(this.cssShapeLayerClassName);t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t);break;default:this.layers.getLayer("shape").write(),this.layers.getLayer("text").write()}}hasNonEmptyLabel(){return null!=this.label&&!this.label.empty()}doUpdate(){if(this.layers.clearEachLayer(),"inheritance"==this.type){!function(t,e,i){let s=u(i.position),n=function(t,e){let i={x:0,y:0};switch(e){case p:i={x:t.x-12,y:t.y};break;case y:i={x:t.x+12,y:t.y};break;case c:i={x:t.x,y:t.y+12};break;case g:i={x:t.x,y:t.y-12}}return i}(i,s);d(t,e,n,s),function(t,e,i){let s={x:0,y:0},n={x:0,y:0};switch(i){case p:s={x:e.x-12,y:e.y-10},n={x:e.x-12,y:e.y+10};break;case y:s.x=e.x+12,s.y=e.y-10,n.x=e.x+12,n.y=e.y+10;break;case c:s.x=e.x-10,s.y=e.y+12,n.x=e.x+10,n.y=e.y+12;break;case g:s.x=e.x-10,s.y=e.y-12,n.x=e.x+10,n.y=e.y-12}let o=e.x+","+e.y+" "+s.x+","+s.y+" "+n.x+","+n.y;a.SVGUtils.Polygon(t,o)}(t,i,s)}(this.shapeLayer.group().addClass("inheritance-connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("composition"==this.type){l(this.shapeLayer.group().addClass("composition-connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("aggregation"==this.type){l(this.shapeLayer.group().addClass("aggregation-connector__shape"),this.connectionPoint1,this.connectionPoint2)}else if("synchronousmessage"==this.type){let t=this.shapeLayer.group().addClass("UMLSynchronousMessage"),e=null;null!=this.label&&null!=this.label.text&&""!=this.label.text&&(e=this.textLayer.group()),h(t,e,this.connectionPoint1,this.connectionPoint2,this.label)}else if("returnmessage"==this.type){if(null!=this.connectionPoint1.element&&this.connectionPoint1.element!=this.connectionPoint2.element){!function(t,e,i){a.SVGUtils.Line(t,e.x,e.y,i.x,e.y).attr("stroke-dasharray","4, 4"),i.x>=e.x?(a.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y-6),a.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y+6)):(a.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y-6),a.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y+6))}(this.shapeLayer.group().addClass("UMLReturnMessage"),this.connectionPoint1,this.connectionPoint2)}}else if("creationmessage"==this.type){h(this.shapeLayer.group().addClass("UMLCreationMessage"),this.textLayer.group(),this.connectionPoint1,this.connectionPoint2,this.label)}else if("destructionmessage"==this.type){!function(t,e){a.SVGUtils.Line(t,e.x-10,e.y-10,e.x+10,e.y+10),a.SVGUtils.Line(t,e.x-10,e.y+10,e.x+10,e.y-10)}(this.shapeLayer.group().addClass("UMLDestructionMessage"),this.connectionPoint2)}else if("usecaseassociation"==this.type){!function(t,e,i){a.SVGUtils.Line(t,e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("UMLUseCaseAssociation"),this.connectionPoint1,this.connectionPoint2)}else if("assemblyconnector"==this.type){!function(t,e,i){if(e.x<i.x)a.SVGUtils.Line(t,e.x,e.y,i.x,i.y).attr("stroke-dasharray","8, 4");else{let s=e.y+(i.y-e.y)/2;a.SVGUtils.Line(t,e.x,e.y,e.x+25,e.y).attr("stroke-dasharray","8, 4"),a.SVGUtils.Line(t,e.x+25,e.y,e.x+25,s).attr("stroke-dasharray","8, 4"),a.SVGUtils.Line(t,e.x+25,s,i.x-35,s).attr("stroke-dasharray","8, 4"),a.SVGUtils.Line(t,i.x-35,s,i.x-35,i.y).attr("stroke-dasharray","8, 4"),a.SVGUtils.Line(t,i.x-35,i.y,i.x,i.y).attr("stroke-dasharray","8, 4")}a.SVGUtils.Line(t,i.x-13,i.y+5,i.x,i.y),a.SVGUtils.Line(t,i.x-13,i.y-5,i.x,i.y)}(this.shapeLayer.group().addClass("UMLAssemblyConnector"),this.connectionPoint1,this.connectionPoint2)}else if("communicationpath"==this.type){!function(t,e,i){a.SVGUtils.Line(t,e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("UMLCommunicationPath"),this.connectionPoint1,this.connectionPoint2)}}setType(t){switch(t){case"inheritance":this.cssShapeLayerClassName="codesmithy-uml-diagram__inheritance-connector";break;case"composition":this.cssShapeLayerClassName="codesmithy-uml-diagram__composition-connector";break;case"aggregation":this.cssShapeLayerClassName="codesmithy-uml-diagram__aggregation-connector";break;case"creationmessage":this.cssShapeLayerClassName="codesmithy-uml-diagram__creation-message-connector";break;case"synchronousmessage":this.cssShapeLayerClassName="codesmithy-uml-diagram__synchronous-message-connector";break;case"returnmessage":this.cssShapeLayerClassName="codesmithy-uml-diagram__return-message-connector";break;case"destructionmessage":this.cssShapeLayerClassName="codesmithy-uml-diagram__destruction-message-connector"}}}function l(t,e,i){let s=u(i.position);d(t,e,function(t,e){let i={x:0,y:0};switch(e){case p:i={x:t.x-20,y:t.y};break;case y:i={x:t.x+20,y:t.y};break;case c:i={x:t.x,y:t.y+20};break;case g:i={x:t.x,y:t.y-20}}return i}(i,s),s),function(t,e,i){let s={x:0,y:0},n={x:0,y:0},o={x:0,y:0};switch(i){case p:s={x:e.x-10,y:e.y-8},n={x:e.x-20,y:e.y},o={x:e.x-10,y:e.y+8};break;case y:s={x:e.x+10,y:e.y-8},n={x:e.x+20,y:e.y},o={x:e.x+10,y:e.y+8};break;case c:s={x:e.x+8,y:e.y+10},n={x:e.x,y:e.y+20},o={x:e.x-8,y:e.y+10};break;case g:s={x:e.x+8,y:e.y-10},n={x:e.x,y:e.y-20},o={x:e.x-8,y:e.y-10}}let a=e.x+","+e.y+" "+s.x+","+s.y+" "+n.x+","+n.y+" "+o.x+","+o.y;t.polygon(a)}(t,i,s)}function h(t,e,i,s,n){if(null!=i.element&&i.element==s.element){if(null!=e&&null!=n&&null!=n.text&&""!=n.text){let t=a.SVGUtils.Text(e,0,0,n.text);t.move(i.x+8,i.y-t.bbox().height-3)}a.SVGUtils.Line(t,i.x,i.y,i.x+30,i.y),a.SVGUtils.Line(t,i.x+30,i.y,i.x+30,s.y),a.SVGUtils.Line(t,i.x+30,s.y,s.x+12,s.y);let o=s.x+","+s.y+" "+(s.x+12)+","+(s.y-6)+" "+(s.x+12)+","+(s.y+6);a.SVGUtils.Polygon(t,o)}else if(i.x<s.x){if(null!=e&&null!=n&&null!=n.text&&""!=n.text){let t=a.SVGUtils.Text(e,0,0,n.text),o=s.x-i.x;t.bbox().width<o?t.move(i.x+(o-t.bbox().width)/2,i.y-t.bbox().height-2):t.move(i.x+2,i.y-6-t.bbox().height-2)}a.SVGUtils.Line(t,i.x,i.y,s.x-12,s.y);let o=s.x-12+","+(s.y-6)+" "+s.x+","+s.y+" "+(s.x-12)+","+(s.y+6);a.SVGUtils.Polygon(t,o)}else if(i.x>s.x){if(null!=e&&null!=n&&null!=n.text&&""!=n.text){let t=a.SVGUtils.Text(e,0,0,n.text),o=i.x-s.x;t.bbox().width<o?t.move(s.x+(o-t.bbox().width)/2,s.y-t.bbox().height-2):t.move(s.x+2,s.y-6-t.bbox().height-2)}a.SVGUtils.Line(t,i.x,i.y,s.x+12,s.y);let o=s.x+12+","+(s.y-6)+" "+s.x+","+s.y+" "+(s.x+12)+","+(s.y+6);a.SVGUtils.Polygon(t,o)}else{if(null!=e&&null!=n&&null!=n.text&&""!=n.text){let t=a.SVGUtils.Text(e,0,0,n.text);t.move(i.x+8,i.y-t.bbox().height-3)}a.SVGUtils.Line(t,i.x,i.y,i.x+30,i.y),a.SVGUtils.Line(t,i.x+30,i.y,s.x+30,s.y),a.SVGUtils.Line(t,s.x+30,s.y,s.x+12,s.y);let o=s.x+","+s.y+" "+(s.x+12)+","+(s.y-6)+" "+(s.x+12)+","+(s.y+6);a.SVGUtils.Polygon(t,o)}}e.Connector=r;var c=0,g=1,y=2,p=3;function u(t){switch(t){case n.ConnectionPointPosition.TopCenter:return g;case n.ConnectionPointPosition.RightCenter:return y;case n.ConnectionPointPosition.BottomCenter:return c;case n.ConnectionPointPosition.LeftCenter:return p;default:throw new Error("Invalid value for ConnectionPointPosition")}}function d(t,e,i,s){switch(s){case c:case g:switch(function(t,e,i){let s=m.Straight;s=e.x==t.x?m.Straight:i==g&&t.position==n.ConnectionPointPosition.RightCenter?m.TopRightCorner:i==g&&t.position==n.ConnectionPointPosition.LeftCenter?m.TopLeftCorner:i==c&&t.position==n.ConnectionPointPosition.RightCenter?m.BottomRightCorner:i==c&&t.position==n.ConnectionPointPosition.LeftCenter?m.BottomLeftCorner:m.HorizontalStep;return s}(e,i,s)){case m.Straight:a.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case m.TopRightCorner:case m.TopLeftCorner:case m.BottomRightCorner:case m.BottomLeftCorner:a.SVGUtils.Line(t,e.x,e.y,i.x,e.y),a.SVGUtils.Line(t,i.x,e.y,i.x,i.y);break;case m.HorizontalStep:let s=i.y+(e.y-i.y)/2;a.SVGUtils.Line(t,e.x,e.y,e.x,s),a.SVGUtils.Line(t,e.x,s,i.x,s),a.SVGUtils.Line(t,i.x,s,i.x,i.y)}break;case y:case p:switch(function(t,e,i){let s=m.Straight;s=e.y==t.y?m.Straight:i==p&&t.position==n.ConnectionPointPosition.BottomCenter?m.BottomLeftCorner:i==p&&t.position==n.ConnectionPointPosition.TopCenter?m.TopLeftCorner:i==y&&t.position==n.ConnectionPointPosition.BottomCenter?m.BottomRightCorner:i==y&&t.position==n.ConnectionPointPosition.TopCenter?m.TopRightCorner:m.VerticalStep;return s}(e,i,s)){case m.Straight:a.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case m.TopRightCorner:case m.TopLeftCorner:case m.BottomRightCorner:case m.BottomLeftCorner:a.SVGUtils.Line(t,e.x,e.y,e.x,i.y),a.SVGUtils.Line(t,e.x,i.y,i.x,i.y);break;case m.VerticalStep:let s=i.x+(e.x-i.x)/2;a.SVGUtils.Line(t,e.x,e.y,s,e.y),a.SVGUtils.Line(t,s,e.y,s,i.y),a.SVGUtils.Line(t,s,i.y,i.x,i.y)}}}var m={Straight:0,TopRightCorner:1,TopLeftCorner:2,BottomRightCorner:3,BottomLeftCorner:4,HorizontalStep:5,VerticalStep:6}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Metrics=class{constructor(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Log=class{constructor(t){switch(t){case"none":this.level=0;break;case"error":this.level=1;break;case"warn":this.level=2;break;case"info":this.level=3;break;case"debug":this.level=4;break;case"trace":this.level=5}}error(t){this.level>=1&&console.error(t)}warn(t){this.level>=2&&console.warn(t)}info(t){this.level>=3&&console.log(t)}debug(t){this.level>=4&&console.log(t)}trace(t){this.level>=5&&console.log(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(6);e.Errors=s.Errors,e.UMLWebWidgetError=s.UMLWebWidgetError;const n=i(7);e.IDGenerator=n.IDGenerator;const o=i(8);e.Settings=o.Settings;const a=i(9);e.Style=a.Style;const r=i(10);e.Diagram=r.Diagram;const l=i(2);e.ConnectionPoint=l.ConnectionPoint;const h=i(0);e.ConnectionPointPosition=h.ConnectionPointPosition;const c=i(1);e.DiagramElement=c.DiagramElement;const g=i(21);e.Connector=g.Connector;const y=i(11);e.LayoutManager=y.LayoutManager;const p=i(17);e.LifelineLayout=p.LifelineLayout;const u=i(12);e.ClassBox=u.ClassBox;const d=i(14);e.ClassTemplate=d.ClassTemplate;const m=i(16);e.Lifeline=m.Lifeline;const x=i(19);e.Actor=x.Actor;const f=i(20);e.UseCase=f.UseCase;const C=i(15);e.Component=C.Component;const P=i(18);e.Node=P.Node;const b=i(28);e.Note=b.Note;const L=i(5);e.SVGLayer=L.SVGLayer;const w=i(3);e.SVGLayerSet=w.SVGLayerSet;const v=i(23);e.Log=v.Log;const _=i(22);e.Metrics=_.Metrics},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(3);var n=Symbol();e.BallConnector=class{constructor(t,e,i){this.svg=t,this.layers=new s.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[n]=this.textGroup.text(this.name).move(0,0),this.width=this[n].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[n].bbox().height+3,this.move(t,e)}update(){this.shapeLayer.clear(),this[n].move(this.x,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.circle(10).move(this.x+this.width/2-5,this.y+22),t.line(this.x+10+this.width/2-5,this.y+27,this.x+this.width,this.y+27)}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-4,y:this.y+this[n].bbox().height+5}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(3);var n=Symbol();e.SocketConnector=class{constructor(t,e,i){this.svg=t,this.layers=new s.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[n]=this.textGroup.text(this.name).move(0,0),this.width=this[n].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[n].bbox().height+6,this.move(t,e)}update(){this.shapeLayer.clear(),this[n].move(this.x+5,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.line(this.x,this.y+this[n].bbox().height+8,this.x+this.width/2,this.y+this[n].bbox().height+8);let e=this.svg.clip();e.rect(10,17).move(this.x+this.width/2-1,this.y+this[n].bbox().height,0),t.circle(15).move(this.x+this.width/2,this.y+this[n].bbox().height+1).clipWith(e),this.uptodate=!0}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-1+10,y:this.y+this[n].bbox().height+8}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Label=class{constructor(t){this.text=t}empty(){return null==this.text||""==this.text}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1);class n extends s.DiagramElement{constructor(t,e,i,s){super(t,null,null),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.noteDescription=i,this.style=s}update(){this.uptodate=!0}}e.Note=n}])}));